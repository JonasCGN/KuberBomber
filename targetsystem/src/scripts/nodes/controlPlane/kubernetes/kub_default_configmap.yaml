apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-ingress # Nome do ConfigMap principal
  namespace: nginx-ingress
  # ... (outros metadados existentes)
data:
  # ... (outras chaves existentes, como 'error-log-level', etc.)
  default-server-snippets: | # <-- NOVA CHAVE AQUI
    # Roteamento para /foo
    location /foo {
        proxy_pass http://foo-service.default.svc.cluster.local:9898;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Roteamento para /bar
    location /bar {
        proxy_pass http://bar-service.default.svc.cluster.local:9898;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Roteamento para /test
    location /test {
        proxy_pass http://test-service.default.svc.cluster.local:9898;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Regra para qualquer outro caminho não correspondido no default server
    location / {
        return 404 "Página não encontrada no default server."; # Ou proxy para um erro 404 personalizado
    }
